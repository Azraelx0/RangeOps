# VyOS VM Creation
default creds vyos/vyos
1. Install VyOS rolling ISO
  - Check file integrity
  - minisign -Vm <ISO file> -P RWSIhkR/dkM2DSaBRniv/bbbAf8hmDqdbOEmgXkf1RxRoxzodgKcDyGq
 - selected the desired node for installation (devops-nitrogen)
  - Right click the chosen node and select create VM or go to top right and select create VM button
  
- Proceed through the installation options:
    * General Tab
      - Select node (devops-nitrogen)
      - Select VM ID (1078)
      - Select Name for VM (MercerVyOS)
      - Select resource pool (Interns)
      - Click next    
    * OS Tab
      - Choose local storage and select the vyos-1.5-rolling-202404040019-amd64.iso
      - Click next
    * System Tab
      - Leave all options default and click next
    * Disk Tab
      - Leave Bus/Device default
      - Select local-lvm
      - Choose required storage space (35gb)
      - Click next
    * CPU Tab
      - Chose 1 socket
      - 1 core
      - type x86-64-v2-AES
      - Click next
    * Memory Tab
      - Select desired RAM (2048)
      - Click next
    * Network Tab
      - Changed bridge to vmbr0
      - Click next
    * Confirm Tab
      - Make sure it all looks correct and click confirm
2. VyOS setup
Note: Every change made needs to be committed using commit command. If changes work as they should use save to save the config.
- From VyOS terminal 
- configure command 
* Set interface(s)
- set interfaces ethernet "adapter" address dhcp
- set interfaces ethernet "adapter" description 'description'
- set interfaces ethernet "adapter" address 'ip address' (remember the cidr)
DHCP setup
set service dhcp-server shared-network-name LAN subnet 192.168.1.0/24 option default-router '192.168.1.1'
set service dhcp-server shared-network-name LAN subnet 192.168.1.0/24 option name-server '192.168.1.1'
set service dhcp-server shared-network-name LAN subnet 192.168.1.0/24 option domain-name 'internal'
set service dhcp-server shared-network-name LAN subnet 192.168.1.0/24 lease '86400'
set service dhcp-server shared-network-name LAN subnet 192.168.1.0/24 range 0 start '192.168.1.9'
set service dhcp-server shared-network-name LAN subnet 192.168.1.0/24 range 0 stop '192.168.1.254'
set service dhcp-server shared-network-name LAN subnet 192.168.1.0/24 subnet-id '1'
- Set DNS
set service dns forwarding listen-on 192.168.1.1
set service dns forwarding allow-from 192.168.1.0/24
set service dns forwarding name-server 8.8.8.8

(Didn't have to do this part only NAT Part)
* Firewall Rules
- Must point traffic from private range to WAN gateway
- Configure NAT, next-hop, and public dns
  - Set DNS: set system name-server 8.8.8.8 (google)
  - set nat source rule "number" outbound-interface name 'eth0'
  - set nat source rule "number" source address '192.168.0.0/24'
  - set nat source rule "number" translation address masquerade
  - Configure next hop: set protocols static route 192.168.0.0/24 next-hop ip address
- Create Firewall Groups (easier config and management)
  - set firewall group interface-group WAN interface eth0
  - set firewall group interface-group LAN interface eth1
  - set firewall group network-group NET-INSIDE-v4 network '192.168.0.0/24'
* at this point can ping eth0 gateway and hosts on it, can't connect to internet.
