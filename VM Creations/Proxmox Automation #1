# user, password removed from script. Add the needed information for vmid, name, proxmox_host, etc.
# Note must install proxmoxer 
# Template details
TEMPLATE_VMID =   # VMID of your template
TARGET_NODE = ""  # Node where the clone will be created
NEW_VM_ID =   # Desired VMID for the new linked clone
NEW_VM_NAME = ""

try:
    # Connect to Proxmox API
    proxmox = ProxmoxAPI(
        PROXMOX_HOST,
        user=PROXMOX_USER,
        password=PROXMOX_PASSWORD,
        verify_ssl=VERIFY_SSL,
    )

    # Clone the template to create a linked clone
    # The 'full' parameter set to 0 indicates a linked clone
    clone_task = proxmox.nodes(TARGET_NODE).qemu(TEMPLATE_VMID).clone.create(
        newid=NEW_VM_ID,
        name=NEW_VM_NAME,
        full=0  # 0 for linked clone, 1 for full clone
    )

    print(f"Linked clone creation initiated. Task ID: {clone_task}")
    print(f"New VM ID: {NEW_VM_ID}, Name: {NEW_VM_NAME}")

from proxmoxer import ProxmoxAPI
# Connect to Proxmox
proxmox = ProxmoxAPI(
    'proxmox_host',
    user=''
    password=''
    verify_ssl=False
)
 # List nodes and VMs
for node in proxmox.nodes.get():
    print (f"Node: {node['node']}")
    for vm in proxmox.nodes(node['node']).qemu.get():
        print(f" VM {vm['vmid']}: {vm['name']} => {vm['status']}")
# Create new VM
proxmox.nodes('node_name').qemu.create(
    # Note add vmid 
    vmid=,
    name='',
    memory=2048,
    cores=2,
    scsi0='NFS-PVEVM',
    net0='virtio,bridge='
)
# Start VM
proxmox.nodes('node_name').qemu(vmid number here).status.start.post()
